name: Calc Result to Issue

on:
  push:
    branches: [ "main" ]
  workflow_dispatch: # ìˆ˜ë™ ì‹¤í–‰ ë²„íŠ¼ í™œì„±í™”

jobs:
  run-and-report:
    runs-on: ubuntu-latest
    # ì´ìŠˆ ì‘ì„±ì„ ìœ„í•´ ì“°ê¸° ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤
    permissions:
      issues: write

    steps:
      - name: ì½”ë“œ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v4

      - name: Python ì„¤ì¹˜
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      - name: ê³„ì‚° ì‹¤í–‰ ë° ê²°ê³¼ ì €ì¥
        id: calc_step
        run: |
          # íŒŒì´ì¬ ì‹¤í–‰ ê²°ê³¼ë¥¼ output.md íŒŒì¼ì— ì €ì¥
          python calc.py > output.md
          # ì €ì¥ëœ ë‚´ìš©ì„ í™•ì¸
          cat output.md

      - name: ê²°ê³¼ë¥¼ ì´ìŠˆë¡œ ë“±ë¡
        uses: peter-evans/create-issue-from-file@v5
        with:
          title: "ğŸš€ ì‚¬ì¹™ì—°ì‚° ìë™ ì‹¤í–‰ ê²°ê³¼"
          content-filepath: ./output.md
